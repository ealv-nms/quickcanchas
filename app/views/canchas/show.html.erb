<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

<div class="container mt-5 mb-5">
    
    <div class="row d-flex justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="row">
                    <div class="col-md-6">
                        <div class="images p-3">
                            <div class="text-center p-4"> <img id="main-image" src="https://static.vecteezy.com/system/resources/thumbnails/001/840/684/small/football-field-or-soccer-field-background-green-grass-court-for-create-soccer-game-free-vector.jpg" width="250" /> </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="product p-4">
                                <h5 class="text-uppercase">Cancha de <%= @cancha.tipo %></h5>
                                <div class="price d-flex flex-row align-items-center"> <span class="act-price">$<%= @cancha.precio %></span>
                                </div>
                            
                                <div class="about"> 

                                <% if @resenas.average('puntaje').to_i == 1 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star"></i>
                                    <i class="bi bi-star"></i>
                                    <i class="bi bi-star"></i>
                                    <i class="bi bi-star"></i>

                                    </div>
                                    <%elsif @resenas.average('puntaje').to_i == 2 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <%elsif @resenas.average('puntaje').to_i == 3 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <%elsif @resenas.average('puntaje').to_i == 4 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <%elsif @resenas.average('puntaje').to_i == 5 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    </div>
                                    <% else%>
                        <div class="ratings">
                        <i class="bi bi-star"></i>
                        <i class="bi bi-star"></i>
                        <i class="bi bi-star"></i>
                        <i class="bi bi-star"></i>
                        <i class="bi bi-star"></i>
                        </div>
                                    <%end%>
                                </div>
                            <div class="sizes mt-5">
                            <p class="about"><%= @cancha.descripcion %></p>
                            </div>
                            <div class="cart mt-4 align-items-center"> <%= link_to new_cancha_reserva_path(@cancha), class: "btn btn-primary btn-sm" do %>
                                Reserva nueva
                                <% end %>
                            </div> 
                            <div class="cart mt-4 align-items-center"> <%= link_to cancha_reservas_path(@cancha), class: "btn btn-primary btn-sm" do %>
                                Unirse a una reserva ya existente
                                <% end %>
                            </div> 
                            <div class="cart mt-4 align-items-center"> <%= link_to new_cancha_resena_path(@cancha), class: "btn btn-primary btn-sm" do %>
                                Escribir una reseÃ±a para esta cancha
                              <% end %>
                              </div>        
                        </div>
                    </div>
                </div>
            </div>
            <% @resenas.each do |resena| %>
                <% if resena.cancha_id == @cancha.id.to_i %>
                    <% @users.each do |user| %>
                        <% if resena.user_id == user.id %>

                        
                        <div class="container align-self-center mt-5 mb-5">
    
                        <div class="row justify-content-md-center align-items-center g-2">                                                     
                            <div class="col-md-4">
                                
                                <div class="card p-3 text-center px-4">
                                    
                                    <div class="user-image">
                                        
                                <img src="https://static.vecteezy.com/system/resources/previews/002/318/271/original/user-profile-icon-free-vector.jpg" class="rounded-circle" width="80"
                                        >
                                        
                                    </div>
                                    
                                    <div class="user-content">
                                        
                                        <h5 class="mb-0"><%=user.email%></h5>
                                        <p><%=resena.comentario%></p>
                                        
                                    </div>
                                    <% if resena.puntaje == 1 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star"></i>
                                    <i class="bi bi-star"></i>
                                    <i class="bi bi-star"></i>
                                    <i class="bi bi-star"></i>

                                    </div>
                                    <%elsif resena.puntaje == 2 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <%elsif resena.puntaje == 3 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <%elsif resena.puntaje == 4 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <%elsif resena.puntaje == 5 %>
                                    <div class="ratings">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    </div>
                                    <%end%>
                                    
                                </div>
                                
                            </div>
                            
                        
                        </div>
                    
                        
                    </div>
                        <% end %>
                    <% end %>
                <% end %>
            <% end %>
          
        </div>
    </div>
</div>


